<!DOCTYPE html>
<html lang="en"> 
  
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta name="description" content="TechWave">
<meta name="author" content="Frenify">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<title>AI Chat Bot - TechWave</title>


<script>
	if (!localStorage.frenify_skin) {
		localStorage.frenify_skin = 'dark';
	}
	if (!localStorage.frenify_panel) {
		localStorage.frenify_panel = '';
	}
	document.documentElement.setAttribute("data-techwave-skin", localStorage.frenify_skin);
	if(localStorage.frenify_panel !== ''){
		document.documentElement.classList.add(localStorage.frenify_panel);
	}
  	
</script>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<!-- !Google Fonts -->

<!-- Styles -->
<link type="text/css" rel="stylesheet" href="css/plugins.css?ver=1.0.0">
<link type="text/css" rel="stylesheet" href="css/style.css?ver=1.0.0">
<!--[if lt IE 9]> <script type="text/javascript" src="js/modernizr.custom.js"></script> <![endif]-->
<!-- !Styles -->

</head>

<body>


<!-- Moving Submenu -->
<div class="techwave_fn_fixedsub">
	<ul></ul>
</div>
<!-- !Moving Submenu -->

<!-- Preloader -->
<div class="techwave_fn_preloader">
	<svg>
		<circle class="first_circle" cx="50%" cy="50%" r="110"></circle>
		<circle class="second_circle" cx="50%" cy="50%" r="110"></circle>
	</svg>
</div>
<!-- !Preloader -->



<!-- MAIN WRAPPER -->
<div class="techwave_fn_wrapper fn__has_sidebar">
	<div class="techwave_fn_wrap">
	
	
		<!-- !Searchbar -->
	
		
		<!-- LEFT PANEL -->
		<div class="techwave_fn_leftpanel">
			
			<div class="mobile_extra_closer"></div>
			
			<!-- logo (left panel) -->
			<div class="leftpanel_logo">
				<a href="index.html" class="fn_logo">
					<span class="full_logo">
						<img src="img/logo.png" alt="" class="desktop_logo">
						<img src="img/logo.png" alt="" class="retina_logo">
					</span>
					<span class="short_logo">
						<img src="img/FAVICON-1-300x300.png" alt="" class="desktop_logo">
						<img src="img/FAVICON-1-300x300.png" alt="" class="retina_logo">
					</span>
				</a>
				<a href="#" class="fn__closer fn__icon_button desktop_closer">
					<img src="svg/arrow.svg" alt="" class="fn__svg">
				</a>
				<a href="#" class="fn__closer fn__icon_button mobile_closer">
					<img src="svg/arrow.svg" alt="" class="fn__svg">
				</a>
			</div>
			<!-- !logo (left panel) -->
			
			<!-- content (left panel) -->
			<div class="leftpanel_content">
			
				<!-- #1 navigation group -->
				<div class="nav_group">
					<h2 class="group__title">Start Here</h2>
					<ul class="group__list">
						<li>
							<a href="index.html" class="fn__tooltip menu__item" data-position="right" title="Home">
								<span class="icon"><img src="svg/home.svg" alt="" class="fn__svg"></span>
								<span class="text">Home</span>
							</a>
						</li>
						<li>
							<a href="community-feed.html" class="fn__tooltip menu__item" data-position="right" title="Community Feed">
								<span class="icon"><img src="svg/community.svg" alt="" class="fn__svg"></span>
								<span class="text">Community Feed</span>
							</a>
						</li>
						<li>
							<a href="personal-feed.html" class="fn__tooltip menu__item" data-position="right" title="Personal Feed">
								<span class="icon"><img src="svg/person.svg" alt="" class="fn__svg"></span>
								<span class="text">Personal Feed<span class="count">48</span></span>
							</a>
						</li>
						<li>
							<a href="models.html" class="fn__tooltip menu__item" data-position="right" title="Finetuned Models">
								<span class="icon"><img src="svg/cube.svg" alt="" class="fn__svg"></span>
								<span class="text">Finetuned Models</span>
							</a>
						</li>
					</ul>
				</div>
				<!-- !#1 navigation group -->
		
				
			</div>
			<!-- !content (left panel) -->
			
		</div>
		<!-- !LEFT PANEL -->
		
		
		<!-- CONTENT -->
		<div class="techwave_fn_content">
		
			<!-- PAGE (all pages go inside this div) -->
			<div class="techwave_fn_page">
				
				<!-- AI Chat Bot Page -->
				<div class="techwave_fn_aichatbot_page fn__chatbot">
					
					<div class="chat__page">
					
						
						
						<div class="fn__title_holder">
							<div class="container">
								<!-- Active chat title -->
								<h1 class="title">Chat Bot Definition</h1>
								<!-- !Active chat title -->
							</div>
						</div>
						
						<div class="container">
							<div class="chat__list">

								<div id="chat0" class="chat__item"></div>

								<div class="chat__item active" id="chatBox">
									<!-- <div class="chat__box your__chat">
										<div class="author"><span>You</span></div>
										<div class="chat">
											<p>What is a chat bot?</p>
										</div>
									</div>
									<div class="chat__box bot__chat">
										<div class="author"><span>Leo</span></div>
										<div class="chat">
											<p>At the most basic level, a chatbot is a computer program that simulates and processes human conversation (either written or spoken), allowing humans to interact with digital devices as if they were communicating with a real person. Chatbots can be as simple as rudimentary programs that answer a simple query with a single-line response, or as sophisticated as digital assistants that learn and evolve to deliver increasing levels of personalization as they gather and process information.</p>
										</div>
									</div>
									<div class="chat__box your__chat">
										<div class="author"><span>You</span></div>
										<div class="chat">
											<p>How do chatbots work?</p>
										</div>
									</div>
									<div class="chat__box bot__chat">
										<div class="author"><span>Leo</span></div>
										<div class="chat">
											<p>Chatbots boost operational efficiency and bring cost savings to businesses while offering convenience and added services to internal employees and external customers. They allow companies to easily resolve many types of customer queries and issues while reducing the need for human interaction.</p>
										</div>
									</div> -->
								</div>

								<!-- <div class="chat__item" id="chat2"></div>

								<div class="chat__item" id="chat3"></div>

								<div class="chat__item" id="chat4"></div> -->

							</div>
						</div>
							
						
						<div class="chat__comment">
							<div class="container">
								<div class="fn__chat_comment">
									<div class="new__chat">
										<p>Ask it questions, engage in discussions, or simply enjoy a friendly chat.</p>
									</div>
									<textarea rows="1" class="fn__hidden_textarea" tabindex="-1"></textarea>
									<textarea rows="1" placeholder="Send a message..." id="userInput"></textarea>
									<button id="sendBtn"><img src="svg/enter.svg" alt="" class="fn__svg"></button>
								</div>
							</div>
						</div>
						
					</div>
					
					
					
				</div>
				<!-- !AI Chat Bot Page -->
				
			</div>
			<!-- !PAGE (all pages go inside this div) -->
			
			
			<!-- FOOTER (inside the content) -->
			<footer class="techwave_fn_footer">
				<div class="techwave_fn_footer_content">
					<div class="copyright">
						<p>2023© Frenify Team</p>
					</div>
					<div class="menu_items">
						<ul>
							<li><a href="terms.html">Terms of Service</a></li>
							<li><a href="privacy.html">Privacy Policy</a></li>
						</ul>
					</div>
				</div>
			</footer>
			<!-- !FOOTER (inside the content) -->
			
		</div>
		<!-- !CONTENT -->
		
		
	</div>
</div>
<!-- !MAIN WRAPPER -->

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const chatBox = document.getElementById('chatBox');
        if (!chatBox) return;
        
        const greetingMessage = `
            <div class="chat__box bot__chat">
                <div class="author"><span>Leo</span></div>
                <div class="chat">
                    <p>Hello! I am Leo, your AI assistant. How can I help you today?</p>
                </div>
            </div>
        `;
        chatBox.insertAdjacentHTML('beforeend', greetingMessage);
    });

    const greetings = [
        "hello", "hi", "hey", "hy", "greetings", "good morning", "good afternoon", "good evening",
        "what's up", "howdy", "yo", "hi there"
    ];
    const defaultGreetingResponse = "Hello! How can Salvation assist you today? 😊";

    function isGreeting(query) {
        return greetings.some(greeting => query.toLowerCase().includes(greeting));
    }

    async function fetchJsonData() {
        try {
            const response = await fetch("data/data.json");
            if (!response.ok) throw new Error('Failed to load JSON data');
            return await response.json();
        } catch (error) {
            console.error(error);
            return [];
        }
    }

    async function getBotReply(query) {
        if (isGreeting(query)) return defaultGreetingResponse;

        const apiKey = "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"; // Replace with a valid API key
        const model = 'text-embedding-3-small';
        const jsonData = await fetchJsonData();

        let queryEmbedding;
        try {
            const embeddingResponse = await fetch('https://api.openai.com/v1/embeddings', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    Authorization: `Bearer ${apiKey}`,
                },
                body: JSON.stringify({ model, input: query }),
            });

            if (!embeddingResponse.ok) throw new Error('Failed to fetch embeddings');
            const embeddingData = await embeddingResponse.json();
            queryEmbedding = embeddingData.data[0]?.embedding;
            if (!queryEmbedding) throw new Error('Embedding data missing');
        } catch (error) {
            console.error(error);
            return "I'm having trouble processing your request.";
        }

        const cosineSimilarity = (vectorA, vectorB) => {
            const dotProduct = vectorA.reduce((sum, a, idx) => sum + a * vectorB[idx], 0);
            const magnitudeA = Math.sqrt(vectorA.reduce((sum, a) => sum + a ** 2, 0));
            const magnitudeB = Math.sqrt(vectorB.reduce((sum, b) => sum + b ** 2, 0));
            return dotProduct / (magnitudeA * magnitudeB);
        };

        const similarities = jsonData.map(chunk => ({
            chunk: chunk.content,
            similarity: cosineSimilarity(queryEmbedding, chunk.embedding),
        })).sort((a, b) => b.similarity - a.similarity);

        const topMatches = similarities.slice(0, 3);

        let contentRules = "";
        try {
            contentRules = "Only respond to the context about Maximum Africa L.E.O or Africa L.E.O";
        } catch (e) {
            console.warn("window.Android.getContentRules() is not available.");
        }

        try {
            const chatResponse = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    Authorization: `Bearer ${apiKey}`,
                },
                body: JSON.stringify({
                    model: 'gpt-4o-mini',
                    messages: [
                        { role: 'system', content: contentRules },
                        {
                            role: 'user',
                            content: `Answer based on context:\n\n${topMatches.map(m => m.chunk).join('\n\n')}\n\nQuery: ${query}`,
                        },
                    ],
                    max_tokens: 500,
                }),
            });

            if (!chatResponse.ok) throw new Error('Failed to fetch AI response');
            const result = await chatResponse.json();
            return result.choices[0]?.message?.content || "I couldn't generate a response.";
        } catch (error) {
            console.error(error);
            return "I'm experiencing an issue. Please try again later.";
        }
    }

    function typingEffect(element, text, callback) {
        let index = 0;
        element.textContent = "";
        const interval = setInterval(() => {
            if (index < text.length) {
                element.textContent += text[index++];
            } else {
                clearInterval(interval);
                if (callback) callback();
            }
        }, 5);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');

        if (!chatBox || !userInput || !sendBtn) return;

        async function sendMessage() {
            const query = userInput.value.trim();
            if (!query) return;

            const userMessage = `
                <div class="chat__box your__chat" style="margin-top: 20px">
                    <div class="author"><span>You</span></div>
                    <div class="chat">
                        <p class="bubble">${query}</p>
                    </div>
                </div>
            `;
            chatBox.insertAdjacentHTML('beforeend', userMessage);
            userInput.value = '';

            const typingIndicator = document.createElement('div');
            typingIndicator.classList.add('chat-content');
            typingIndicator.innerHTML = `
                <div class="chat__box bot__chat">
                    <div class="author"><span>Leo</span></div>
                    <div class="chat">
                        <p class="typing">...</p>
                    </div>
                </div>
            `;
            chatBox.appendChild(typingIndicator);

            const botReply = await getBotReply(query);

            typingIndicator.remove();
            const botMessage = document.createElement('div');
            botMessage.innerHTML = `
                <div class="chat__box bot__chat">
                    <div class="author"><span>Leo</span></div>
                    <div class="chat">
                        <p class="bubble"></p>
                    </div>
                </div>
            `;
            chatBox.appendChild(botMessage);

            typingEffect(botMessage.querySelector('.bubble'), botReply);

            chatBox.scrollTop = chatBox.scrollHeight;
        }

        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                sendMessage();
            }
        });
    });
</script>


<!-- Scripts -->
<!-- <script type="text/javascript" src="js/jquery.js?ver=1.0.0"></script> -->
<!-- <script type="text/javascript" src="js/plugins.js?ver=1.0.0"></script> -->
<!--[if lt IE 10]> <script type="text/javascript" src="js/ie8.js"></script> <![endif]-->
<!-- <script type="text/javascript" src="js/init.js?ver=1.0.0"></script> -->
<!-- !Scripts -->

</body>
</html>